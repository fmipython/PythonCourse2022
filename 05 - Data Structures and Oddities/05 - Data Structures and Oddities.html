
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Data Structures &amp; Oddities &#8212; Python Course 2022/2023</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Type Hints" href="../06%20-%20Typing%20Hints/06%20-%20Typing%20Hints.html" />
    <link rel="prev" title="Функционално програмиране" href="../04%20-%20Functional%20Programming/04%20-%20Functional%20Programming.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Python Course 2022/2023</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    Курс “Програмиране с Python” 2022
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../02%20-%20Variables%2C%20types%2C%20control%20flow/02%20-%20Variables%2C%20types%2C%20control%20flow.html">
   Променливи, разклонения, цикли, типове, функции
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../03%20-%20OOP/03%20-%20OOP.html">
   Обектно-ориентирано програмиране
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../04%20-%20Functional%20Programming/04%20-%20Functional%20Programming.html">
   Функционално програмиране
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Data Structures &amp; Oddities
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../06%20-%20Typing%20Hints/06%20-%20Typing%20Hints.html">
   Type Hints
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../07%20-%20Exceptions%20Handling/07%20-%20Exceptions%20Handling.html">
   Грешки и изключения
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../08%20-%20Files/08%20-%20Files.html">
   Работа с файлове в Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../09%20-%20Multithreading/09%20-%20Multithreading.html">
   Многонишково програмиране с Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../11%20-%20Python%202%20vs%20Python%203/11%20-%20Python%202%20vs%20Python%203.html">
   Сравнение на версии 2 и 3 на Python: прилики и разлики
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../12%20-%20Git/README.html">
   Работа с Git
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../13%20-%20Modules/13%20-%20Modules.html">
   Модули и пакети
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/fmipython/PythonCourse2022/main?urlpath=tree/05 - Data Structures and Oddities/05 - Data Structures and Oddities.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://colab.research.google.com/github/fmipython/PythonCourse2022/blob/main/05 - Data Structures and Oddities/05 - Data Structures and Oddities.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Colab"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="headerbtn__text-container">Colab</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/fmipython/PythonCourse2022"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/fmipython/PythonCourse2022/issues/new?title=Issue%20on%20page%20%2F05 - Data Structures and Oddities/05 - Data Structures and Oddities.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/fmipython/PythonCourse2022/edit/main/05 - Data Structures and Oddities/05 - Data Structures and Oddities.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/05 - Data Structures and Oddities/05 - Data Structures and Oddities.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Защо?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#go">
   3.. 2.. 1.. Go
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   Сложност на алгоритми
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#str">
   Str
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#int">
   Int
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#math">
   Math
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#list">
   List
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#array">
   Array
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dict">
   Dict
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#defaultdict">
     Defaultdict
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#counter">
     Counter
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#set">
   Set
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#frozenset">
     Frozenset
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#stack">
   Stack
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#queue">
   Queue
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#priorityqueue">
   PriorityQueue
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#heapq">
   heapq
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deque">
   deque
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#algorithms-oddities">
   Algorithms &amp; Oddities
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#binary-search">
   Binary Search
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#copy-deepcopy">
   Copy &amp; Deepcopy
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#random">
   Random
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#itertools">
   Itertools
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#functools">
   Functools
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#csv">
   CSV
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#json">
   JSON
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#regex">
   Regex
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   Допълнителни задачи
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Data Structures & Oddities</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Защо?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#go">
   3.. 2.. 1.. Go
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   Сложност на алгоритми
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#str">
   Str
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#int">
   Int
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#math">
   Math
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#list">
   List
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#array">
   Array
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dict">
   Dict
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#defaultdict">
     Defaultdict
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#counter">
     Counter
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#set">
   Set
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#frozenset">
     Frozenset
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#stack">
   Stack
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#queue">
   Queue
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#priorityqueue">
   PriorityQueue
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#heapq">
   heapq
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deque">
   deque
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#algorithms-oddities">
   Algorithms &amp; Oddities
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#binary-search">
   Binary Search
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#copy-deepcopy">
   Copy &amp; Deepcopy
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#random">
   Random
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#itertools">
   Itertools
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#functools">
   Functools
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#csv">
   CSV
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#json">
   JSON
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#regex">
   Regex
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   Допълнителни задачи
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <p><a href="https://colab.research.google.com/github/fmipython/PythonCourse2022/blob/dsa/05%20-%20Data%20Structures%20and%20Algorithms/05%20-%20Data%20Structures%20and%20Algorithms.ipynb" target="_parent"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/></a></p>
<section class="tex2jax_ignore mathjax_ignore" id="data-structures-oddities">
<h1>Data Structures &amp; Oddities<a class="headerlink" href="#data-structures-oddities" title="Permalink to this headline">#</a></h1>
<p>Структурите от данни са класове и обекти с интерфейс чрез който ги използваме, като се абстрахираме от имплементацията им.</p>
<p>Алгоритмите са генерализирани процедури (парчета код/функции) които решават даден проблем (изпълняват дадена задача).</p>
<p>Oddities са модули на Python, които нямат място в друга тема, но са интересни за решаването на проблеми.</p>
<section id="id1">
<h2>Защо?<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h2>
<p>Структурите от данни и алгоритми:</p>
<ul class="simple">
<li><p>Се използват често (по-простите от тях: List/Dict/Sort)</p></li>
<li><p>Подпомагат разбирането на други езици за програмиране (e.g. JavaScript обектите са Dict)</p></li>
<li><p>Са основа на по-сложни системи и приложения (e.g. Приоритетната опашка може да се реализира чрез запазване на опашката в база данни)</p></li>
<li><p>Са ключови за Google-style интервютата</p></li>
</ul>
<p><img alt="https://i.imgur.com/dVcLsFl.png" src="https://i.imgur.com/dVcLsFl.png" /></p>
</section>
<section id="go">
<h2>3.. 2.. 1.. Go<a class="headerlink" href="#go" title="Permalink to this headline">#</a></h2>
</section>
<section id="id2">
<h2>Сложност на алгоритми<a class="headerlink" href="#id2" title="Permalink to this headline">#</a></h2>
<p><a class="reference external" href="https://www.bigocheatsheet.com/">https://www.bigocheatsheet.com/</a></p>
<p>За оценка на сложност (бързина) на алгоритми използваме нотацията “Big O” <span class="math notranslate nohighlight">\(O(...)\)</span>.</p>
<p>Сложността оценяваме спрямо размера на входа, като най-често използваме <span class="math notranslate nohighlight">\(n\)</span>, за да обозначим размера на входа.</p>
<p>Примери за <span class="math notranslate nohighlight">\(n\)</span>:</p>
<ul class="simple">
<li><p>За list K: <span class="math notranslate nohighlight">\(n = len(K)\)</span></p></li>
<li><p>За str K: <span class="math notranslate nohighlight">\(n = len(K)\)</span></p></li>
<li><p>За int K: <span class="math notranslate nohighlight">\(n = bytes\;of\;K = log_{10}(K) \approxeq log_2(K)\)</span> (но обикновено int казваме че има константен размер <span class="math notranslate nohighlight">\(O(1)\)</span>)</p></li>
</ul>
<p>Най-важните сложности са:</p>
<ul class="simple">
<li><p>Constant <span class="math notranslate nohighlight">\(O(1)\)</span></p></li>
<li><p>Linear <span class="math notranslate nohighlight">\(O(n)\)</span></p></li>
<li><p>Linearithmic <span class="math notranslate nohighlight">\(O(n \times log(n))\)</span></p></li>
<li><p>Quadratic <span class="math notranslate nohighlight">\(O(n^2)\)</span></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># O(1)
def constant(x):
    return x + 1

# O(n)
def linear(arr):  # O(n x 1) = O(n)
    for x in arr:  # O(n)
        print(x)  # O(1)

# O(n * log n)
def linearithmic(arr):
    logi = 1
    while logi &lt; len(arr):  # O(log n)
        # iterations = len(arr) = 2 ^ logi -&gt; solve for logi -&gt; logi = log(len(arr))
        logi *= 2
        linear(arr)

# O(n * log n)
def linearithmic2(arr):
    arr.sort()  # O(n * log n)

# O (n^2)
def quadratic(arr):  # O(n * n * 1) = O(n^2)
    for row in range(len(arr)):  # O(n)
        for column in range(len(arr)):  # O(n)
            print(arr[row][column])  # O(1)
</pre></div>
</div>
</div>
</div>
</section>
<section id="str">
<h2>Str<a class="headerlink" href="#str" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">str</span></code> е поредица от символи. Ще разгледаме:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str">str</a> методи и</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/string.html">string</a> често употребявани константи</p></li>
</ul>
<p>Стринговете в Python са immutable -&gt; Повечето операции са <span class="math notranslate nohighlight">\(O(n)\)</span></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Python speaks   UTF-8 :) https://en.wikipedia.org/wiki/UTF-8
s = &#39;🐍 is awesomeͤͤͤͤͤ&#39;
print(s)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>🐍 is awesomeͤͤͤͤͤ
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>s = &#39;🐍 is awesomeͤͤͤͤͤ&#39;
# .encode() Конвертира стринг до байтове.
# Някой байтове не могат да се представят със символ от азбуката
# и използват Hexadecimal Escape Sequence

# Често се използва при работа с файлове -
# понякога четем и пишем байтове вместо стрингове
encoded = s.encode(&#39;utf-8&#39;)
print(f&#39;{s} -&gt; {encoded}&#39;)
print(&#39;От байтове може да се върнем в стринг:&#39;, encoded.decode())
# 🐍 = \xf0\x9f\x90\x8d
# сложи символ отгоре = &#39;\xcd&#39;
# какво да се сложи отгоре = &#39;\xa4&#39;

# = 🐍 Поредица от байтове се индикира с b&#39;&#39;
print(&#39;🐍 =&#39;, b&#39;\xf0\x9f\x90\x8d&#39;.decode())
print(&quot;b&#39;&#39; е просто списък от uint8:&quot;, bytes(
    [0xf0, 0x9f, 0x90, 0x8d]).decode())
print(&#39;Дължината на 🐍 e: &#39;, len(b&#39;\xf0\x9f\x90\x8d&#39;))  # len(\xYY) = 1 byte

# Итерирането по стринг работи чрез итериране по символи, не по байтове
print([x for x in &#39;cool 🐍&#39;])
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>🐍 is awesomeͤͤͤͤͤ -&gt; b&#39;\xf0\x9f\x90\x8d is awesome\xcd\xa4\xcd\xa4\xcd\xa4\xcd\xa4\xcd\xa4&#39;
От байтове може да се върнем в стринг: 🐍 is awesomeͤͤͤͤͤ
🐍 = 🐍
b&#39;&#39; е просто списък от uint8: 🐍
Дължината на 🐍 e:  4
[&#39;c&#39;, &#39;o&#39;, &#39;o&#39;, &#39;l&#39;, &#39; &#39;, &#39;🐍&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>print(&#39;Форматирането работи! {0} * {1} = {2}&#39;.format(&#39;🐍&#39;, &#39;🐍&#39;, &#39;🐍²&#39;))
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Форматирането работи! 🐍 * 🐍 = 🐍²
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>if &#39;самобукви&#39;.isalpha():
    print(&#39;{букви} = alphabetic&#39;)

# Можем ли да конвертираме стринга до int?
if &#39;1232367457&#39;.isdigit():
    print(&#39;{числа} = digit&#39;)

# Бърза проверка дали работим с дума или изречение (изречението има паузи и символи)
if &#39;1283912873andLetters&#39;.isalnum():
    print(&#39;{числа, букви} = alpha-numeric&#39;)

# Трябва ли да пишем код който разбира от главни букви?
if &#39;малкибукви&#39;.islower():
    print(&#39;{малки букви} = lowercase&#39;)

if &#39;ГОЛЕМИБУКВИ&#39;.isupper():
    print(&#39;{големи букви} = uppercase&#39;)

# Използваме при разбиване на стрингове - if space : do X else do Y
if &#39;\t\n  &#39;.isspace():
    print(&#39;{празни символи} = space&#39;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{букви} = alphabetic
{числа} = digit
{числа, букви} = alpha-numeric
{малки букви} = lowercase
{големи букви} = uppercase
{празни символи} = space
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>s = &#39;🐍 is awesomeͤͤͤͤͤ&#39;

if s.endswith(&#39;e&#39;):
    print(&#39;s завършва на e&#39;)  # eͤͤͤ != e

if s.startswith(&#39;🐍 is&#39;):
    print(&quot;s започва с &#39;🐍 is&#39;&quot;)

print(&#39;is е на индекс&#39;, s.find(&#39;is&#39;))  # Индекс по символ, не по байт

print(&quot;&#39;e&#39; се среща&quot;, s.count(&#39;e&#39;), &#39;пъти&#39;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>s започва с &#39;🐍 is&#39;
is е на индекс 2
&#39;e&#39; се среща 2 пъти
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import re

s = &#39;🐍 is awesomeͤͤͤͤͤ&#39;
print(s)

print(&#39;Не винаги субституциите работят както ни се иска:&#39;,
      s.replace(&#39;awesome&#39;, &#39;много лесен курс&#39;))

print(&#39;Но може да сработят с regex:&#39;, re.sub(r&#39;awesome.*&#39;, &#39;бЪрЗ&#39;, s))

print(&#39;Може да направим всички символи големи:&#39;, s.upper())

# Често използваме за да оеднаквим символите, A = a и няма защо
# да ги третираме различно
print(&#39;или малки:&#39;, &#39;THICC -&gt;&#39;, &#39;THICC&#39;.lower())

# Ако някой въведе &quot;me@mail.com  &quot; то очевидно няма спейс в края на мейл
# -&gt; strip() -&gt; &quot;me@mail.com&quot;
print(&quot;Да разчистим празните символи &#39;    нещо ми духа &#39;-&gt; &#39;&quot; +
      &#39;    нещо ми духа  &#39;.strip() + &quot;&#39;&quot;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>🐍 is awesomeͤͤͤͤͤ
Не винаги субституциите работят както ни се иска: 🐍 is много лесен курсͤͤͤͤͤ
Но може да сработят с regex: 🐍 is бЪрЗ
Може да направим всички символи голем: 🐍 IS AWESOMEͤͤͤͤͤ
или малки: THICC -&gt; thicc
Да разчистим празните символи &#39;    нещо ми духа &#39;-&gt; &#39;нещо ми духа&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Много подпомага дебъгването и не оставя запетая след последния елемент!!
import re
print(&#39;Удобно е да принтираме списъци:&#39;,
      &#39;, &#39;.join([&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;worldwide&#39;]))
# При разбиване на стрингове
# (данни, които знаем че саразделени с някакъв символ)
print(&#39;или да разбиваме стринг на елементи:&#39;, &#39;fmi:poluchi:li?&#39;.split(&#39;:&#39;))

# за по-сложни разбивания - regex (:
print(re.split(r&#39;,|:|\?&#39;, &#39;kude:sym,az?kude:si,ti?&#39;))
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Удобно е да принтираме списъци: 1, 2, 3, 4, worldwide
или да разбиваме стринг на елементи: [&#39;fmi&#39;, &#39;poluchi&#39;, &#39;li?&#39;]
[&#39;kude&#39;, &#39;sym&#39;, &#39;az&#39;, &#39;kude&#39;, &#39;si&#39;, &#39;ti&#39;, &#39;&#39;]
</pre></div>
</div>
</div>
</div>
<p>Библиотеката <code class="docutils literal notranslate"><span class="pre">string</span></code> предоставя някои удобни константи</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import string

# Вместо да хардкодваме &quot;abcdef...&quot;
print(&#39;all letters:&#39;, string.ascii_letters)
print(&#39;all lowercase:&#39;, string.ascii_lowercase)
print(&#39;all digits as a string:&#39;, string.digits)
print(&#39;all symbols:&#39;, string.punctuation)
print(&#39;all whitespaces:&#39;, string.whitespace, string.whitespace.encode())
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>all letters: abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ
all lowercase: abcdefghijklmnopqrstuvwxyz
all digits as a string: 0123456789
all symbols: !&quot;#$%&amp;&#39;()*+,-./:;&lt;=&gt;?@[\]^_`{|}~
all whitespaces:  	
 b&#39; \t\n\r\x0b\x0c&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="int">
<h2>Int<a class="headerlink" href="#int" title="Permalink to this headline">#</a></h2>
<p>Python няма ограничение за големината на int (C++ long long има ограничение <span class="math notranslate nohighlight">\(2^{63}-1\)</span>). Но операциите с големи числа са бавни - не са <span class="math notranslate nohighlight">\(O(1)\)</span>, а <span class="math notranslate nohighlight">\(O(log(number)) = O(number\;of\;digits)\)</span></p>
<p>Когато стойността надвиши <span class="math notranslate nohighlight">\(2^{63}-1\)</span> числата се обръщат в BigInt.</p>
<p><a class="reference external" href="https://www.codementor.io/&#64;arpitbhayani/how-python-implements-super-long-integers-12icwon5vk">https://www.codementor.io/&#64;arpitbhayani/how-python-implements-super-long-integers-12icwon5vk</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>%%time

result = 1
for x in range(1, 100000):
    result *= x
# Същият код на C++ минава за total: 0.001 s.
# Но не връща верен отговор :)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 4.23 s, sys: 22.9 ms, total: 4.25 s
Wall time: 4.27 s
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import sys

print(&#39;int is {0} bytes&#39;.format(sys.getsizeof(int(1))))
print(&#39;10^1000 is {0} bytes&#39;.format(sys.getsizeof(int(10**1000))))
print(&#39;float is {0} bytes&#39;.format(sys.getsizeof(float(1))))
# float има прецизност като double в C++ (~14 знака след запетаята)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>int is 28 bytes
10^1000 is 468 bytes
float is 24 bytes
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># За по голяма прицизност може да използваме `decimal` модула
# По дефолт има прецизност 28 знака след запетаята,
# но може да му дадем повече :)
from decimal import *
getcontext().prec = 56
print(Decimal(22) / Decimal(7))
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.1428571428571428571428571428571428571428571428571428571
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Начин на използване

print(&#39;Стринг -&gt; int:&#39;, int(&#39;42&#39;))
print(&#39;Конвертиране от други бройни системи, освен base10:&#39;, int(&#39;ff&#39;, 16))
print(&#39;Премахване на знаците след десетичната запетая&#39;, int(-5.2), int(5.2))
print(&#39;Абсолютна стойност(-5) =&#39;, abs(-5))
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Стринг -&gt; int: 42
Конвертиране от други бройни системи, освен base10: 255
Премахване на знаците след десетичната запетая -5 5
Абсолютна стойност(-5) = 5
</pre></div>
</div>
</div>
</div>
</section>
<section id="math">
<h2>Math<a class="headerlink" href="#math" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import math

print(&#39;Закръгляне нагоре 2.2 -&gt;&#39;, math.ceil(2.2))
print(&#39;Закръгляне надолу 2.7 -&gt;&#39;, math.floor(2.7))

# Може да правим побитово итериране на  числото
print(&#39;Преброяване на битовете на числото 257 =&#39;, math.ceil(math.log2(257)))
# Полезно при построяване на Trie/radix sort/заделяне на hashmap
print(&#39;Преброяване на цифрите на числото 14532 =&#39;, math.ceil(math.log10(14532)))

# Математически важни функции
print(&#39;Най-голям общ делител на 35 и 15 =&#39;, math.gcd(35, 15))
print(&#39;Можем да смятаме inverse елемента по модул 15^-1 mod 26 =&#39;, pow(15, -1, 26))

# Комбинаторика (често се среща в задачи, но има и други)
print(&#39;N choose K -&gt; 10 choose 2 =&#39;, math.comb(10, 2))
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Закръгляне на горе 2.2 -&gt; 3
Закръгляне на долу 2.7 -&gt; 2
Преброяване на битовете на числото 257 = 9
Преброяване на цифрите на числото 14532 = 5
Най-голям общ делител на 35 и 15 = 5
Можем да смятаме inverse елемента по модул 15^-1 mod 26 = 7
N choose K -&gt; 10 choose 2 = 45
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Специални стойности на float:
# Not a Number (полезно като дъно на стек)
print(&#39;Not a Number =&#39;, math.nan)
# Infinity (полезно като последен елемент на масив,
# нещо като терминираща нула в C++)
print(&#39;Infinity =&#39;, math.inf)
# -Infinity
print(&#39;-Infinity =&#39;, -math.inf)

# Константи
print(&#39;π = &#39;, math.pi)
print(&#39;e = &#39;, math.e)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Not a Number = nan
Infinity = inf
-Infinity = -inf
π =  3.141592653589793
e =  2.718281828459045
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">math</span></code> модулът има още много функции на които няма да се спираме, защото не се използват често:</p>
<ul class="simple">
<li><p>Тригонометрични функции</p></li>
<li><p>Хиперболични функции</p></li>
<li><p>Гама функция</p></li>
<li><p>Конвертиране между градуси и радиани</p></li>
<li><p>Други</p></li>
</ul>
</section>
<section id="list">
<h2>List<a class="headerlink" href="#list" title="Permalink to this headline">#</a></h2>
<p>Саморазширяващ се списък/масив от елементи. Въпреки името list, структурата е динамичен масив, а не свързан списък.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>arr = [0] * 10  # инициализиране на списък с 10 елемента O(n)
print(&#39;Списък с 10 елемента:&#39;, arr)

arr = list()  # празен списък O(1)
arr.clear()  # O(1) еквивалентно на &#39; = list()&#39;
print(&#39;Празен списък:&#39;, arr)

# O(1*) за разлика от конкатенацията на стрингове (&#39;abc&#39; + &#39;d&#39;) която е O(n)
arr.append(1)
arr.insert(0, -1)  # O(n)
arr = [-2] + arr  # O(n) еквивалентно на горното АКО елементите НЕ СА list
print(&#39;До момента имаме:&#39;, arr)

arr.reverse()  # O(n)
print(&#39;Може да обърнем списъка&#39;, arr)

arr.sort()  # O(n * log n)
print(&#39;И да го сортираме&#39;, arr)

last_element = arr.pop()  # O(1)
print(&#39;pop премахва последния елемент и го връща&#39;, arr, last_element)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Списък с 10 елемента: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
Празен списък: []
До момента имаме: [-2, -1, 1]
Може да обърнем списъка [1, -1, -2]
И да го сортираме [-2, -1, 1]
pop премахва последния елемент и го връща [-2, -1] 1
</pre></div>
</div>
</div>
</div>
<p>Примери с често използвани техники върху <code class="docutils literal notranslate"><span class="pre">list</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Сортиране на списък с обекти
tuples = [(2, &#39;elon&#39;), (1, &#39;daddy&#39;)]

# Ако вместо tuples имаме обекти използваме obj.field, вместо x[1]
tuples.sort(key=lambda x: (x[1]))

# ламбда функцията връща tuple от елементи в каквато последователност
# трябва да се сравняват.
# Ако 0-левия елемент е един и същ, пробвай 1вия.
# Ако първият елемент е един и същ, пробвай 2рия и тн.
print(&#39; &#39;.join(list(x[1] for x in tuples)))

# Обръщане на списък
reversed_tuples = tuples[::-1]  # създава нов списък
print(&#39; &#39;.join(list(x[1] for x in reversed_tuples)))

# Копиране на списък
tuples_copy = tuples[::]
tuples_copy.clear()
print(f&#39;{tuples = }, {tuples_copy = }&#39;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>daddy elon
elon daddy
tuples = [(1, &#39;daddy&#39;), (2, &#39;elon&#39;)], tuples_copy = []
</pre></div>
</div>
</div>
</div>
</section>
<section id="array">
<h2>Array<a class="headerlink" href="#array" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">array</span></code> предоставя по-ефективно използване на паметта от <code class="docutils literal notranslate"><span class="pre">list</span></code>. Повече прилича на стандартните масиви в други езици. Добавянето на елемент в края на <code class="docutils literal notranslate"><span class="pre">array</span></code> е <span class="math notranslate nohighlight">\(O(1)\)</span>.</p>
<p>Има същите функционалности като <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
<p>При инициализиране трябва да окажем типа на елементите в списъка.</p>
<p>Ако се е стигнало до използване на по-оптимизирани структури в Python най-добре да използваме някоя библиотека като <code class="docutils literal notranslate"><span class="pre">numpy</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>%%capture
# %%capture is a jupyter instruction to hide output
from array import array

array(&#39;l&#39;)  # array&lt;32 bit int&gt;
array(&#39;u&#39;, &#39;hello \u2641&#39;)  # array&lt;unicode character&gt;
array(&#39;d&#39;, [1.0, 2.0, 3.14])  # array&lt;double&gt;
array(&#39;I&#39;, [1, 2, 3])  # array&lt;unsigned 16 bit int&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="dict">
<h2>Dict<a class="headerlink" href="#dict" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">dict</span></code> е питонската имплементация на Hash-Table. Повечето операции с <code class="docutils literal notranslate"><span class="pre">dict</span></code> са <span class="math notranslate nohighlight">\(O(1)\)</span>. Изключение правят операциите за обработка на всички елементи, които са <span class="math notranslate nohighlight">\(O(n)\)</span>.</p>
<p>Елементите на <code class="docutils literal notranslate"><span class="pre">dict</span></code> са <code class="docutils literal notranslate"><span class="pre">key</span></code>-<code class="docutils literal notranslate"><span class="pre">value</span></code> (ключ - стойност). Ключът задължително трябва да е от тип, който може да се хешира, стойността може да е всякаква.</p>
<p>Забележка: Казваме, че операциите са <span class="math notranslate nohighlight">\(O(1)\)</span>, но всъщност зависят от размера на ключа. Обикновено ключовете са малки по размер в паметта и за това на повечето места в литературата се казва че операциите са <span class="math notranslate nohighlight">\(O(1)\)</span>, но ако ключовете ни са стрингове с дължина 100,000 символа, то сложността на операциите не е точно <span class="math notranslate nohighlight">\(O(1)\)</span> :)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>my_dict = {}  # Инициализираме празен dict
my_dict = dict()  # dict() == {}

my_dict[&#39;is big&#39;] = &#39;not&#39;
print(&#39;dict с 1 елемент&#39;, f&#39;{my_dict = }&#39;)
del my_dict[&#39;is big&#39;]  # del изтрива елемент
print(&#39;празен dict след като изтрихме ключа &quot;is big&quot;&#39;, f&#39;{my_dict = }&#39;)
# Ако се опитаме да достъпим или изтрием ключ който не
# съществува ще гръмнем с KeyError
del my_dict[&#39;non-existent key&#39;]
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dict с 1 елемент my_dict = {&#39;is big&#39;: &#39;not&#39;}
празен dict след като изтрихме ключа &quot;is big&quot; my_dict = {}
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">19</span><span class="p">],</span> <span class="n">line</span> <span class="mi">10</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;празен dict след като изтрихме ключа &quot;is big&quot;&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">my_dict</span> <span class="si">= }</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="c1"># Ако се опитаме да достъпим или изтрием ключ който не</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> <span class="c1"># съществува ще гръмнем с KeyError</span>
<span class="ne">---&gt; </span><span class="mi">10</span> <span class="k">del</span> <span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;non-existent key&#39;</span><span class="p">]</span>

<span class="ne">KeyError</span>: &#39;non-existent key&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Итериране по dict
person_age = {
    &#39;Gosho na pochivka&#39;: 25,
    &#39;Gosho na fmi&#39;: 11001,
}

result = []
for x in person_age:  # == .keys()
    result.append(x)
print(&#39;for x in dict:&#39;, result)

result = []
for x in person_age.keys():
    result.append(x)
print(&#39;for x in dict.keys():&#39;, result)

result = []
for x in person_age.values():
    result.append(x)
print(&#39;for x in dict.values():&#39;, result)

result = []
for x in person_age.items():
    result.append(x)
print(&#39;for x in dict.items():&#39;, result)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>for x in dict: [&#39;Gosho na pochivka&#39;, &#39;Gosho na fmi&#39;]
for x in dict.keys(): [&#39;Gosho na pochivka&#39;, &#39;Gosho na fmi&#39;]
for x in dict.values(): [25, 11001]
for x in dict.items(): [(&#39;Gosho na pochivka&#39;, 25), (&#39;Gosho na fmi&#39;, 11001)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># По време на итериране не е позволено да променяме dict
palindromes = {
    &#39;ami&#39;: &#39;ima&#39;,
    &#39;pari&#39;: &#39;irap&#39;,
    &#39;nema&#39;: &#39;amen&#39;,
}

for x in palindromes:
    palindromes[x] = &#39;nali ne mojelo da se promenq e bai xy*&#39;

print(palindromes)

for x in palindromes:
    del palindromes[x]  # промяна върху ключовете не работи :(
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;ami&#39;: &#39;nali ne mojelo da se promenq e bai xy*&#39;, &#39;pari&#39;: &#39;nali ne mojelo da se promenq e bai xy*&#39;, &#39;nema&#39;: &#39;nali ne mojelo da se promenq e bai xy*&#39;}
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">RuntimeError</span><span class="g g-Whitespace">                              </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">21</span><span class="p">],</span> <span class="n">line</span> <span class="mi">13</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span>     <span class="n">palindromes</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;nali ne mojelo da se promenq e bai xy*&#39;</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span> <span class="nb">print</span><span class="p">(</span><span class="n">palindromes</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">13</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">palindromes</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span>     <span class="k">del</span> <span class="n">palindromes</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>

<span class="ne">RuntimeError</span>: dictionary changed size during iteration
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>print(&#39;въпреки грешката на предишната стъпка изтрихме 1 ключ (на рандъм)&#39;, palindromes)

# Тъй като не може да променяме dict докато итерираме ще трябва да създадем нов
changed = {k: &#39;shte si napravq moi dict togava&#39;
           for k, _ in palindromes.items() if k != &#39;pari&#39;}
print(changed)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>въпреки грешката на предишната стъпка изтрихме 1 ключ (на рандъм) {&#39;pari&#39;: &#39;nali ne mojelo da se promenq e bai xy*&#39;, &#39;nema&#39;: &#39;nali ne mojelo da se promenq e bai xy*&#39;}
{&#39;nema&#39;: &#39;shte si napravq moi dict togava&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Задача

my_list = [1,2,3,4,5]
my_dict = {1:&#39;a&#39;, 2:&#39;b&#39;, 3:&#39;c&#39;, 4:&#39;d&#39;, 5:&#39;e&#39;}

# Коя операция е по-бърза
if 4 in my_list:
    print(&#39;list&#39;)
if 4 in my_dict:
    print(&#39;dict&#39;)

&quot;&quot;&quot;Изпълни клетката за хинт&quot;&quot;&quot;
import base64
print(base64.b64decode(
    &#39;0J7Qv9C10YDQsNGC0L7RgNGK0YIgaW4g0LLRitGA&#39;
    &#39;0YXRgyBsaXN0INC1IE8obiksINCwINCy0YrRgNGF&#39;
    &#39;0YMgZGljdCDQtSBPKDEqKQ==&#39;.encode()).decode())
</pre></div>
</div>
</div>
</div>
<section id="defaultdict">
<h3>Defaultdict<a class="headerlink" href="#defaultdict" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">defaultdict</span></code> живее в модула <code class="docutils literal notranslate"><span class="pre">collections</span></code>. Има същата функционалност като <code class="docutils literal notranslate"><span class="pre">dict</span></code>, но при инициализация трябва да окажем от какъв тип ще са стойностите. При достъпване на ключ, който не съществува, ще се създаде ключа и стойност - дефолтен обект от типа, който задаваме при инициализация.</p>
<p>Обикновено го използваме за удобство - не е нужно да проверяваме дали стойността зад някой ключ е инициализирана.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from collections import defaultdict

my_default_dict = defaultdict(list)
print(my_default_dict)
my_default_dict[&#39;what&#39;]
print(&#39;дори само с достъпване на ключа създаваме дефолтен обект&#39;, my_default_dict)

del my_default_dict[&#39;what&#39;]
for index, char in enumerate(&#39;this is a string&#39;):
    my_default_dict[char].append(index)  # Това ще изгърми с нормален dict

my_default_dict
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>defaultdict(&lt;class &#39;list&#39;&gt;, {})
дори само с достъпване на ключа създаваме дефолтен обект defaultdict(&lt;class &#39;list&#39;&gt;, {&#39;what&#39;: []})
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>defaultdict(list,
            {&#39;t&#39;: [0, 11],
             &#39;h&#39;: [1],
             &#39;i&#39;: [2, 5, 13],
             &#39;s&#39;: [3, 6, 10],
             &#39; &#39;: [4, 7, 9],
             &#39;a&#39;: [8],
             &#39;r&#39;: [12],
             &#39;n&#39;: [14],
             &#39;g&#39;: [15]})
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Задача (advanced)
# Как може да имплементираме Trie чрез defaultdict

import base64
print(base64.b64decode(
    &#39;ZGVmIHRyaWUoKToKICAgIHJldHVybi&#39;
    &#39;BkZWZhdWx0ZGljdCh0cmllKQo=&#39;.encode()).decode())
</pre></div>
</div>
</div>
</div>
</section>
<section id="counter">
<h3>Counter<a class="headerlink" href="#counter" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Counter</span></code> е още един под-клас на <code class="docutils literal notranslate"><span class="pre">dict</span></code>. При инициализация може да се подаде колекция (или друг обект който може да се итерира и елементите му могат да се хешират), която бива итерирана и елементите ѝ се преброяват.
Елементите на колекцията стават ключове, а стойностите са колко пъти даден елемент е срещнат в колекцията.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from collections import Counter

Counter(&#39;string isn\&#39;t a collection, but it\&#39;s iterable&#39;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Counter({&#39;s&#39;: 3,
         &#39;t&#39;: 6,
         &#39;r&#39;: 2,
         &#39;i&#39;: 5,
         &#39;n&#39;: 3,
         &#39;g&#39;: 1,
         &#39; &#39;: 6,
         &quot;&#39;&quot;: 2,
         &#39;a&#39;: 2,
         &#39;c&#39;: 2,
         &#39;o&#39;: 2,
         &#39;l&#39;: 3,
         &#39;e&#39;: 3,
         &#39;,&#39;: 1,
         &#39;b&#39;: 2,
         &#39;u&#39;: 1})
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Задача
# Напишете функция която извежда най-често срещаните букви на даден стринг

import base64
print(base64.b64decode(
    &#39;ZGVmIGNvdW50KHMpOgogICAgY291bnRzID0gbGl&#39;
    &#39;zdChDb3VudGVyKHMpLml0ZW1zKCkpCiAgICBjb3&#39;
    &#39;VudHMuc29ydChrZXk9bGFtYmRhIHg6IC14WzFdK&#39;
    &#39;QogICAgcHJpbnQoY291bnRzKQo=&#39;.encode()).decode())
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="set">
<h2>Set<a class="headerlink" href="#set" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">set</span></code> е <code class="docutils literal notranslate"><span class="pre">dict</span></code>, който има само ключове, стойностите не ни интересуват. Добавяне/премахване/проверка дали елемент е в сет-а се случва за <span class="math notranslate nohighlight">\(O(1)\)</span></p>
<p><code class="docutils literal notranslate"><span class="pre">set</span></code> се използва по-рядко от <code class="docutils literal notranslate"><span class="pre">dict</span></code>, и основно за да намерим уникалните елементи на колекция.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>uniques = set()  # няма по-кратък начин за инициализране на сет, както {} за dict
# Може директно да го инициализираме от колекция
uniques = set([1, 2, 3, 3, 3, 3, 3, 3])
print(&#39;инициализация от колекция&#39;, uniques)

uniques.add(1)  # добавяме елемент
print(&#39;елемент, който вече е в сета няма да се добави отново&#39;, uniques)

print(&#39;Може да обединим 2 сета&#39;, set([1, 2, 3]).union(set([2, 3, 4])))
print(&#39;Може да вземем само общите елементи&#39;, set([1, 2, 3]) &amp; set([2, 3, 4]))
print(&#39;Може да вземем елементите които не са общи&#39;,
      set([1, 2, 3]) ^ set([2, 3, 4]))
print(&#39;Може да проверим дали даден елемент е в сета: 5 in [1,2,3]?&#39;, 5 in set(
    [1, 2, 3]))
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>инициализация от колекция {1, 2, 3}
елемент, който вече е в сета няма да се добави отново {1, 2, 3}
Може да обединим 2 сета {1, 2, 3, 4}
Може да вземем само общите елементи {2, 3}
Може да вземем елементите които не са общи {1, 4}
Може да проверим дали даден елемент е в сета: 5 in [1,2,3]? False
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Задача: колко различни букви са използвани в следния стринг
# &#39;The quick brown fox jumps over the lazy dog&#39;

import base64
print(base64.b64decode(
    &#39;bGVuKHNldCgKICAgICdUaGUgcXVpY2sgYnJvd24gZm9&#39;
    &#39;4IGp1bXBzIG92ZXIgdGhlIGxhenkgZG9nJwogICAgLm&#39;
    &#39;xvd2VyKCkKICAgIC5yZXBsYWNlKCcgJywgJycpCikpC&#39;
    &#39;g==&#39;.encode()).decode())
</pre></div>
</div>
</div>
</div>
<section id="frozenset">
<h3>Frozenset<a class="headerlink" href="#frozenset" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">frozenset</span></code> = immutable <code class="docutils literal notranslate"><span class="pre">set</span></code>. Immutability носи плюсове и минуси:</p>
<ul class="simple">
<li><p>(+) може да хешираме сета (да го използваме като ключ в <code class="docutils literal notranslate"><span class="pre">dict</span></code> или да го добавим в друг <code class="docutils literal notranslate"><span class="pre">set</span></code>)</p></li>
<li><p>(-) не може да го променяме (да добавяме/премахваме елементи)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>my_dict = {
    set([1, 2, 3]): &#39;sets are unhashable, trust me&#39;,
}
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">26</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">my_dict</span> <span class="o">=</span> <span class="p">{</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]):</span> <span class="s1">&#39;sets are unhashable, trust me&#39;</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="p">}</span>

<span class="ne">TypeError</span>: unhashable type: &#39;set&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>numbers = set([1, 2, 3])

my_dict = {
    frozenset(numbers): &#39;my password&#39;,
    frozenset(&#39;characters&#39;): &#39;ако подадем string, ще конструираме set от буквите&#39;
}
my_dict
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{frozenset({1, 2, 3}): &#39;my password&#39;,
 frozenset({&#39;a&#39;,
            &#39;c&#39;,
            &#39;e&#39;,
            &#39;h&#39;,
            &#39;r&#39;,
            &#39;s&#39;,
            &#39;t&#39;}): &#39;ако подадем string, ще конструираме set от буквите&#39;}
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="stack">
<h2>Stack<a class="headerlink" href="#stack" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">stack</span></code> (стак/стек) е LIFO (Last In First Out) структура, която ни позволява бърз достъп до последния добавен елемент. В Python няма клас <code class="docutils literal notranslate"><span class="pre">Stack</span></code>, защото <code class="docutils literal notranslate"><span class="pre">list</span></code> има всички необходими методи.</p>
<p><img alt="" src="https://i.imgur.com/IDr4JQL.png" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>stack = []
for x in range(100):
    stack.append(x)

first10 = 0
for i in range(10):
    first10 += stack.pop()  # Достъп до последния елемент е О(1)

print(&#39;Сумата на първите 10 елемента е: &#39;, first10)  # sum(100 до 90) = 945
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Сумата на първите 10 елемента е:  945
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Задача
# Имплементирайте клас, който поддържа следните операции
# - O(1) push: добавя нов елемент в стека
# - O(1) топ: връща последния вкаран елемент
# - O(1) pop: премахва последния вкаран елемент
# - O(1) get_min: връща минималният елемент от всички в стека

print(base64.b64decode(
    &#39;Y2xhc3MgTWluU3RhY2s6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgIC&#39;
    &#39;AgICAgc2VsZi5kYXRhID0gW10KICAgICAgICBzZWxmLm1pbnMgPSBbXQoKI&#39;
    &#39;CAgIGRlZiBwdXNoKHNlbGYsIHg6IGludCkgLT4gTm9uZToKICAgICAgICBz&#39;
    &#39;ZWxmLmRhdGEuYXBwZW5kKHgpCiAgICAgICAgaWYgbGVuKHNlbGYubWlucyk&#39;
    &#39;gPiAwOgogICAgICAgICAgICBzZWxmLm1pbnMuYXBwZW5kKG1pbihzZWxmLm&#39;
    &#39;1pbnNbLTFdLCB4KSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmL&#39;
    &#39;m1pbnMuYXBwZW5kKHgpCgogICAgZGVmIHBvcChzZWxmKSAtPiBOb25lOgog&#39;
    &#39;ICAgICAgIHNlbGYuZGF0YS5wb3AoKQogICAgICAgIHNlbGYubWlucy5wb3A&#39;
    &#39;oKQoKICAgIGRlZiB0b3Aoc2VsZikgLT4gaW50OgogICAgICAgIHJldHVybi&#39;
    &#39;BzZWxmLmRhdGFbLTFdCgogICAgZGVmIGdldF9taW4oc2VsZikgLT4gaW50O&#39;
    &#39;gogICAgICAgIHJldHVybiBzZWxmLm1pbnNbLTFdCg==&#39;.encode()).decode())
</pre></div>
</div>
</div>
</div>
</section>
<section id="queue">
<h2>Queue<a class="headerlink" href="#queue" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">queue</span></code> е thread-safe имплементация на опашка (FIFO). Може да я създадем с ограничен размер <code class="docutils literal notranslate"><span class="pre">Queue(maxsize=42)</span></code> - ако се напълни и се пробваме да добавим нов елемент ще се блокира нишката. <code class="docutils literal notranslate"><span class="pre">maxsize=0</span></code> означава че няма лимит и ще се разширява докато имаме памет.</p>
<p>Ако работим в multithreaded среда, то операциите като <code class="docutils literal notranslate"><span class="pre">qsize()</span></code>, <code class="docutils literal notranslate"><span class="pre">empty()</span></code>, <code class="docutils literal notranslate"><span class="pre">full()</span></code> и повечето други нямат гаранции, че връщат винаги точен резултат. Резултатът е близък до точен, но няма гаранция.</p>
<p>Пример: Ако имаме опашка която е пълна и от 1 нишка извикаме <code class="docutils literal notranslate"><span class="pre">full()</span></code> докато се изпълнява <code class="docutils literal notranslate"><span class="pre">full</span></code> може някоя друга нишка да извика <code class="docutils literal notranslate"><span class="pre">get()</span></code> и да премахне елемент - съответно ще получим <code class="docutils literal notranslate"><span class="pre">True</span></code> когато трябва да е <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p><img alt="" src="https://i.imgur.com/c8rMyYo.png" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import queue

que = queue.Queue()
for x in range(100):
    que.put(x)

print(&#39;Елементите ги борим с qsize: &#39;, que.qsize())

total = 0
while not que.empty():  # Работим на 1 нишка така че това е детерминистично
    total += que.get()

print(&#39;Сумата на всички елементи е: &#39;, total)

for x in range(100):
    que.put(x)

first10 = 0
for i in range(10):
    first10 += que.get()

print(&#39;Сумата на първите 10 елемента е: &#39;, first10)  # sum(1 до 10) = 45
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Елементите ги борим с qsize:  100
Сумата на всички елементи е:  4950
Сумата на първите 10 елемента е:  45
</pre></div>
</div>
</div>
</div>
</section>
<section id="priorityqueue">
<h2>PriorityQueue<a class="headerlink" href="#priorityqueue" title="Permalink to this headline">#</a></h2>
<p>Какво правим ако искаме опашка, но елементите да са поддедени по някакъв приоритет, не по реда в който ги добавяме? - тадаа <code class="docutils literal notranslate"><span class="pre">PriorityQueue</span></code> 🎉</p>
<p><code class="docutils literal notranslate"><span class="pre">PriorityQueue</span></code> предоставя добавяне/премахване на елемент за <span class="math notranslate nohighlight">\(O(logn)\)</span> и достъп до най-малкия елемент за <span class="math notranslate nohighlight">\(O(1)\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import queue
import random

numbers = list(range(1, 11))  # [1, 2, ... 10]
random.shuffle(numbers)
print(&#39;Разбъркваме числата с random.shuffle()&#39;, numbers)

que = queue.PriorityQueue()
for x in numbers:
    que.put(x)
print(&#39;Данните не са подредени в реда в който ги добавяме, но 1 винаги е в началото:&#39;,
      que.queue)

top3 = []
for i in range(3):
    top3.append(que.get())

print(&#39;Приоритетната опашка връща елементите от най-малък към най-голям&#39;, top3)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Разбъркваме числата с random.shuffle() [1, 9, 7, 4, 10, 2, 6, 3, 5, 8]
Данните не са подредени в реда в който ги добавяме, но 1 винаги е в началото: [1, 3, 2, 4, 8, 7, 6, 9, 5, 10]
Приоритетната опашка връща елементите от най-малък към най-голям [1, 2, 3]
</pre></div>
</div>
</div>
</div>
<p>За съжаление не е възможно да използваме custom функция за сравнение за да направим Max Heap.</p>
<p>Има 2 начина да решим такава задача, единият е да създаваме клас, който да имплементира <code class="docutils literal notranslate"><span class="pre">__lt__</span></code>/<code class="docutils literal notranslate"><span class="pre">__gt__</span></code>, и <code class="docutils literal notranslate"><span class="pre">__eq__</span></code>.
Вторият ще разгледаме в следващата клетка.</p>
<p>But you know - if you like it hard I won’t stop you - <a class="reference external" href="https://stackoverflow.com/questions/57487170/is-it-possible-to-pass-a-comparator-to-a-priorityqueue-in-python">https://stackoverflow.com/questions/57487170/is-it-possible-to-pass-a-comparator-to-a-priorityqueue-in-python</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Задача
# Как може да използваме вградения клас PriorityQueue като Max Heap, вместо Min Heap

print(base64.b64decode(
    &#39;0JDQutC+INC40LzQsNC80LUg0YfQuNGB0LvQsNGC0LAgW&#39;
    &#39;zEsMiwzLDQsNV0g0LrQvtC1INC1INC90LDQuS3QvNCw0L&#39;
    &#39;vQutC+0YLQvj8g0JDQvNC4INCw0LrQviDQuNC80LDQvNC&#39;
    &#39;1IFstMSwtMiwtMywtNCwtNV0/Cg==&#39;.encode()).decode())
</pre></div>
</div>
</div>
</div>
</section>
<section id="heapq">
<h2>heapq<a class="headerlink" href="#heapq" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">heapq</span></code> предоставя основните методи за работа с приоритетни опашки поотделно. Тоест, не е нужно да ползваме цялата функционалност на <code class="docutils literal notranslate"><span class="pre">PriorityQueue</span></code>, а може да използваме само 1 от методите - например <code class="docutils literal notranslate"><span class="pre">heapq.heapify</span></code>.</p>
<p>tl;dr как работи приоритетна опашка?</p>
<ol class="simple">
<li><p>Ковертираме произволен масив до <code class="docutils literal notranslate"><span class="pre">heapq.heapify()</span></code> <span class="math notranslate nohighlight">\(O(n)\)</span></p></li>
<li><p>Ако искаме да добавим елемент използваме <code class="docutils literal notranslate"><span class="pre">heapq.heappush()</span></code> <span class="math notranslate nohighlight">\(O(log n)\)</span></p></li>
<li><p>Ако искаме да извадим елемент използваме <code class="docutils literal notranslate"><span class="pre">heapq.heappop()</span></code> <span class="math notranslate nohighlight">\(O(log n)\)</span></p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import heapq
import random

numbers = list(range(1, 11))  # [1, 2, ... 10]
random.shuffle(numbers)
print(&#39;Разбъркваме числата с random.shuffle()&#39;, numbers)

heapq.heapify(numbers)  # по-бързо от добавянето на елементи 1 по 1
print(&#39;Данните не са подредени в реда в който ги вкарваме, но 1 винаги е в началото:&#39;,
      numbers)

# Добавянето на нов по-малък елемент ще го постави в началото
heapq.heappush(numbers, 0)
print(&#39;0 винаги е в началото:&#39;, numbers)

top3 = []
for i in range(3):
    top3.append(heapq.heappop(numbers))

print(&#39;Приоритетната опашка връща елементите от най-малък към най-голям&#39;, top3)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Разбъркваме числата с random.shuffle() [4, 2, 9, 5, 3, 8, 1, 7, 10, 6]
Данните не са подредени в реда в който ги вкарваме, но 1 винаги е в началото: [1, 2, 4, 5, 3, 8, 9, 7, 10, 6]
0 винаги е в началото: [0, 1, 4, 5, 2, 8, 9, 7, 10, 6, 3]
Приоритетната опашка връща елементите от най-малък към най-голям [0, 1, 2]
</pre></div>
</div>
</div>
</div>
</section>
<section id="deque">
<h2>deque<a class="headerlink" href="#deque" title="Permalink to this headline">#</a></h2>
<p>Ако ни трябва опашка + стек, тоест искаме <span class="math notranslate nohighlight">\(O(1*)\)</span> за добавяне/премахване на елемент в началото използваме <code class="docutils literal notranslate"><span class="pre">deque</span></code>. Обикновено се имплементира върху Circular Array.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from collections import deque

deq = deque([&#39;опашка ли съм&#39;, &#39;ʞǝꓕɔ иѵи&#39;])
deq.insert(1, &#39;¿?&#39;)  # Добавянето на елемент на произволна позиция е О(n)
print(deq)

deq.append(&#39;у десно&#39;)
deq.append(&#39;у десно (1)&#39;)
deq.appendleft(&#39;у лево&#39;)

print(deq)
print(&#39;последният елемент за О(1):&#39;, deq.pop())
print(&#39;първият елемент за О(1):&#39;, deq.popleft())
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>deque([&#39;опашка ли съм&#39;, &#39;¿?&#39;, &#39;ʞǝꓕɔ иѵи&#39;])
deque([&#39;у лево&#39;, &#39;опашка ли съм&#39;, &#39;¿?&#39;, &#39;ʞǝꓕɔ иѵи&#39;, &#39;у десно&#39;, &#39;у десно (1)&#39;])
последният елемент за О(1): у десно (1)
първият елемент за О(1): у лево
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Интересно приложение на deque е имплементирането на round robin
def roundrobin(*iterables):
    &quot;roundrobin(&#39;ABC&#39;, &#39;D&#39;, &#39;EF&#39;) --&gt; A D E B F C&quot;
    iterators = deque(map(iter, iterables))
    while iterators:
        try:
            while True:
                yield next(iterators[0])
                iterators.rotate(-1)
        except StopIteration:
            iterators.popleft()
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Задача
# Имаме следната имплементация на BFS. Как може да я обърнем до DFS?

from collections import deque

graph = {
    &#39;A&#39;: [&#39;B&#39;, &#39;C&#39;],
    &#39;B&#39;: [&#39;D&#39;, &#39;E&#39;],
    &#39;C&#39;: [&#39;F&#39;],
    &#39;D&#39;: [],
    &#39;E&#39;: [&#39;F&#39;],
    &#39;F&#39;: []
}

def bfs(graph, start):
  visited = set()
  que = deque()
  visited.add(start)
  que.append(start)

  while que:
    s = que.popleft()
    print(s, end=&quot; &quot;)

    for neighbor in graph[s]:
      if neighbor not in visited:
        visited.add(neighbor)
        que.append(neighbor)

print(base64.b64decode(&#39;0JfQsNC80LXQvdGP0LzQsCBkZXF1ZS5wb3BsZWZ0KCk&#39;
  &#39;g0YEgZGVxdWUucG9wKCk=&#39;.encode()).decode())
</pre></div>
</div>
</div>
</div>
</section>
<section id="algorithms-oddities">
<h2>Algorithms &amp; Oddities<a class="headerlink" href="#algorithms-oddities" title="Permalink to this headline">#</a></h2>
</section>
<section id="binary-search">
<h2>Binary Search<a class="headerlink" href="#binary-search" title="Permalink to this headline">#</a></h2>
<p>Бързо (<span class="math notranslate nohighlight">\(O(logn)\)</span>) търсене в сортиран масив.</p>
<p><code class="docutils literal notranslate"><span class="pre">bisect_left</span></code> = кой е първият индекс на който може да поставим елемента, за да се запази подредбата?</p>
<p><code class="docutils literal notranslate"><span class="pre">bisect_right</span></code> = кой е последният индекс на който може да поставим елемента, за да се запази подредбата?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import bisect
numbers = [0, 1, 2, 4, 4, 4, 4, 7, 8, 9]
#          0  1  2  3  4  5  6  7  8  9

print(&#39;Ако елемента съществува, връща индекса на първото срещане&#39;,
      bisect.bisect_left(numbers, 4))
print(&#39;Ако елемента съществува, връща първия индекс след последното срещане&#39;,
      bisect.bisect_right(numbers, 4))

print(&#39;Ако елемента не съществува, връща индекса на първото срещане&#39;,
      bisect.bisect_left(numbers, 5))
print(&#39;Ако елемента не съществува, връща първия индекс след последното срещане&#39;,
      bisect.bisect_right(numbers, 5))
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Ако елемента съществува, връща индекса на първото срещане 3
Ако елемента съществува, връща първия индекс след последното срещане 7
Ако елемента не съществува, връща индекса на първото срещане 7
Ако елемента не съществува, връща първия индекс след последното срещане 7
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Задача
# В сортиран list от числа, напишете функция, която намира броя на срещанията на някое число

print(base64.b64decode(&#39;ZGVmIGNvdW50X29jY3VycmVuY2VzKGhh&#39;
    &#39;eXN0YWNrLCBuZWVkbGUpOgogICAgYmlzZWN0LmJpc2VjdF9yaWd&#39;
    &#39;odChoYXlzdGFjaywgbmVlZGxlKSAtIGJpc2VjdC5iaXNlY3RfbG&#39;
    &#39;VmdChoYXlzdGFjaywgbmVlZGxlKQo=&#39;.encode()).decode())
</pre></div>
</div>
</div>
</div>
</section>
<section id="copy-deepcopy">
<h2>Copy &amp; Deepcopy<a class="headerlink" href="#copy-deepcopy" title="Permalink to this headline">#</a></h2>
<p>Python подава аргументите на функциите по референция, така че може да ги променяме. Това не е винаги желаното поведение, така че Python предоставя 2 метода за копиране да обекти.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from copy import copy, deepcopy

def reset_tree():
    return {
        &#39;value&#39;: &#39;parent&#39;,
        &#39;child&#39;: {
            &#39;value&#39;: &#39;child&#39;,
        }
    }
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>def level_up(root):
    tree = root  # Това не прави нищо, само преименува променливата
    tree[&#39;child&#39;][&#39;value&#39;] = &#39;super child&#39;
    return tree

tree = reset_tree()
same = level_up(tree)
print(tree)
print(same)
print(&#39;Когато подаваме елемент по референция във функцията работим със същия елемент&#39;)
print(f&#39;{id(tree) = } == {id(same) = }&#39;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;value&#39;: &#39;parent&#39;, &#39;child&#39;: {&#39;value&#39;: &#39;super child&#39;}}
{&#39;value&#39;: &#39;parent&#39;, &#39;child&#39;: {&#39;value&#39;: &#39;super child&#39;}}
Когато подаваме елемент по референция във функцията работим със същия елемент
id(tree) = 4399790912 == id(same) = 4399790912
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>def level_up_swallow(root):
    tree = copy(root)
    tree[&#39;child&#39;][&#39;value&#39;] = &#39;super child&#39;
    return tree

tree = reset_tree()
same_but_different_but_same = level_up_swallow(tree)
print(tree)
print(same_but_different_but_same)
print(&#39;(shallow) copy копира обекта, но не копира обектите в него&#39;)
print(f&#39;{id(tree) = } != {id(same_but_different_but_same) = }&#39;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;value&#39;: &#39;parent&#39;, &#39;child&#39;: {&#39;value&#39;: &#39;super child&#39;}}
{&#39;value&#39;: &#39;parent&#39;, &#39;child&#39;: {&#39;value&#39;: &#39;super child&#39;}}
(shallow) copy копира обекта, но не копира обектите в него
id(tree) = 4698146048 != id(same_but_different_but_same) = 4698275328
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>def level_up_deep(root):
    tree = deepcopy(root)
    tree[&#39;child&#39;][&#39;value&#39;] = &#39;super child&#39;
    return tree

tree = reset_tree()
different = level_up_deep(tree)
print(tree)
print(different)
print(&#39;deepcopy създава копие, на обекта и рекурсивно на обектите в него&#39;)
print(f&#39;{id(tree) = } != {id(different) = }&#39;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;value&#39;: &#39;parent&#39;, &#39;child&#39;: {&#39;value&#39;: &#39;child&#39;}}
{&#39;value&#39;: &#39;parent&#39;, &#39;child&#39;: {&#39;value&#39;: &#39;super child&#39;}}
deepcopy създава копие, на обекта и рекурсивно на обектите в него
id(tree) = 4698416960 != id(different) = 4698412800
</pre></div>
</div>
</div>
</div>
</section>
<section id="random">
<h2>Random<a class="headerlink" href="#random" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">random</span></code> модулът предоставя методи за избиране на случаен елемент, случайно число, случайни битове и тн.</p>
<p>Обикновено се използва за тестове (генериране на вход/изход).</p>
<p>За криптографски задачи (криптиране на данни, пароли, генериране на токени и тн), не трябва да се
използва <code class="docutils literal notranslate"><span class="pre">random</span></code>, а <code class="docutils literal notranslate"><span class="pre">secrets</span></code> модула. За да не навлизаме в разликите, нека да кажем че <code class="docutils literal notranslate"><span class="pre">secrets</span></code> генерира
по-рандъм изход от <code class="docutils literal notranslate"><span class="pre">random</span></code> модула :)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import random

# random модулът може да приеме начална стойност, която се използва
# в рандъм алгоритмите, за да върне детерминистичен изход.
# Обикновено се използва за да може даден експеримент/тест да се репродуцира
random.seed(42)

# Това е рандъм число, но заради seed = 42, винаги ще върне 82 в този notebook
random.randint(1, 100)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>82
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import random

print(&#39;рандъм float&#39;, random.random())

print(&#39;randint [0,1]:&#39;, random.randint(0, 1))
# Някои методи в random работят със затворени, някой с отворени интервали.
# Добре е да се провери преди използването им
print(&#39;randrange [0,1) не е много рандъм:&#39;, random.randrange(0, 1))
# randrange(a,b) = randint(a,b-1)

# Ако имаме колекция от елементи може да използваме choice, за да изберем произволен
# Алтернативният метод е да използваме random.randrange(0, len(collection))
print(&#39;Епа кот дойде:&#39;, random.choice([&#39;fuck&#39;, &#39;marry&#39;, &#39;kill&#39;]))

# Може да задаваме и тежести - 50% ще е първият елемент, 25% втория и 25% третия
print(&#39;Понякога рандъм изборът не е много рандъм&#39;,
      random.choices(
          [&#39;boiko&#39;, &#39;pak boiko&#39;, &#39;totally not boiko&#39;],
          weights=[2, 1, 1]
      ))

# Понякога трябва да разбъркаме някяква колекция. Например преди да правим quicksort
numbers = list(range(1, 11))
random.shuffle(numbers)
print(&#39;shuffle:&#39;, numbers)

# При експерименти или когато имаме много данни искаме да изберем произволна подгрупа
print(&#39;Избор на 2 елемента без повторения:&#39;, random.sample(numbers, 2))
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>рандъм float 0.11133106816568039
randint [0,1]: 1
randrange [0,1) не е много рандъм: 0
Епа кот дойде: fuck
Понякога рандъм изборът не е много рандъм [&#39;boiko&#39;]
shuffle: [8, 3, 6, 7, 1, 4, 5, 10, 9, 2]
Избор на 2 елемента без повторения: [7, 9]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>%%capture
import random
# За пълнота трябва да споменем, че random модулът има имплементация на
# повечето видови разпределения от статистиката, но няма да навлизаме в подробности


random.uniform(1, 10)
random.gauss(1, 2)
random.expovariate(1)
random.gammavariate(10, 1)
random.normalvariate(5, 1)
</pre></div>
</div>
</div>
</div>
</section>
<section id="itertools">
<h2>Itertools<a class="headerlink" href="#itertools" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">itertools</span></code> модулът предоставя методи улесняващи итерацията по елементи и често използвани конструкции. Вече сме виждали някой подобни функции като <code class="docutils literal notranslate"><span class="pre">map</span></code>/<code class="docutils literal notranslate"><span class="pre">filter</span></code>.</p>
<p>Функциите са доста и улесняват писането на цикли и особено вложени цикли, но понякога отнема повече време да намерим правилната функция от колкото да напишем кода от 0.</p>
<p>Целият списък е <a class="reference external" href="https://docs.python.org/3/library/itertools.html">тук</a> като има разширение на стандартната библиотека от <a class="reference external" href="https://pypi.org/project/more-itertools/">more-itertools</a> пакета.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import itertools

# Итератор, който се връща в началото на списъка като се изчерпи.
# Наподобява Ring Buffer
cycle = itertools.cycle(&#39;ABC&#39;)
for _ in range(10):
    print(next(cycle), end=&#39;, &#39;)
print()

# Итератор, който обединява няколко итератора/колекции
# Може да го използваме за да flatten-нем списък от списъци
for x in itertools.chain(&#39;first&#39;, &#39; &#39;, &#39;second&#39;):
    print(x, end=&#39;,&#39;)
print()

# Към всеки елемент от списъка се прибавя сумата на всички предишни елементи
print(list(itertools.accumulate([-20, +10, +30, -5])))
# Може да го използваме за да генерираме всички префикси на дума
print(list(itertools.accumulate(&#39;construct&#39;)))

# Генериране на всички уникални двойки. Еквивалентно на 2 вложени цикъла
print(list(itertools.combinations(&#39;ABC&#39;, 2)))

# Генериране на всички съседни двойки
print(list(itertools.pairwise([1, 5, 7, 10])))

# Всички пермутации
print(list(itertools.permutations([0, 1, 2])))

# A x B - декартово произведение
print(list(itertools.product([1, 2, 3], &#39;ABC&#39;)))
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A, B, C, A, B, C, A, B, C, A, 
f,i,r,s,t, ,s,e,c,o,n,d,
[-20, -10, 20, 15]
[&#39;c&#39;, &#39;co&#39;, &#39;con&#39;, &#39;cons&#39;, &#39;const&#39;, &#39;constr&#39;, &#39;constru&#39;, &#39;construc&#39;, &#39;construct&#39;]
[(&#39;A&#39;, &#39;B&#39;), (&#39;A&#39;, &#39;C&#39;), (&#39;B&#39;, &#39;C&#39;)]
[(1, 5), (5, 7), (7, 10)]
[(0, 1, 2), (0, 2, 1), (1, 0, 2), (1, 2, 0), (2, 0, 1), (2, 1, 0)]
[(1, &#39;A&#39;), (1, &#39;B&#39;), (1, &#39;C&#39;), (2, &#39;A&#39;), (2, &#39;B&#39;), (2, &#39;C&#39;), (3, &#39;A&#39;), (3, &#39;B&#39;), (3, &#39;C&#39;)]
</pre></div>
</div>
</div>
</div>
</section>
<section id="functools">
<h2>Functools<a class="headerlink" href="#functools" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">functools</span></code> предоставя фунцкии от по-висок ред - декоратори и помощни функции. Концепциите в модула са доста сложни така че ще разгледаме само по-често използваните. В темата за функционално се разлеглежда един от основните методи - <code class="docutils literal notranslate"><span class="pre">reduce</span></code>.</p>
<p>Друг интересен пример е <code class="docutils literal notranslate"><span class="pre">functools.singledispatch</span></code> декоратора, който ни позволява да overload-ваме функции базирано на типа на първият им аргумент. Тъй като това не работи за функции с повече от 1 аргумент които да overload-нем, няма да му отделяме време. But it exists!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>%%time
import functools

# Нека си дефинираме наивна рекурсивна функция
def fibonacci(n):
    if n in [0, 1]:
        return 1
    return fibonacci(n - 1) + fibonacci(n - 2)


# Имаме O(2 ^ 40) извиквания на фунцкии :(
fibonacci(40)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 19.8 s, sys: 92 ms, total: 19.9 s
Wall time: 20 s
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>165580141
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>%%time
import functools

# Mоже да я забързаме ако кешираме извикванията
# Така няма да правим едно и също изчисление 2 пъти


@functools.lru_cache(maxsize=150)
def fibonacci(n):
    if n in [0, 1]:
        return 1
    return fibonacci(n - 1) + fibonacci(n - 2)


fibonacci(40)
fibonacci(150)
# Дори fib(150) което с наивната рекурсия няма да приключи
# никога минава за под 1ms
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 62 µs, sys: 89 µs, total: 151 µs
Wall time: 155 µs
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>16130531424904581415797907386349
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Ако имаме клас, за който искаме да имплементираме сравнение
# Може да имплементираме само __lt__ и __eq__ и останалите методи
# ще се имплементират за нас
# Защото понякога имплементирането им просто не е тривиално ...

import functools

@functools.total_ordering  # ще имплементира __gt__, __le__, и тн.
class Point:
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __eq__(self, other):
        return self.x == other.x and self.y == other.y

    def __lt__(self, other):
        # Имплементира Z-order curve подредба на точките
        most_significant_dim = &#39;x&#39;
        if self.less_msb(self.x ^ other.x, self.y ^ other.y):
            msd = &#39;y&#39;

        if most_significant_dim == &#39;x&#39;:
            return self.x &lt; other.x
        else:
            return self.y &lt; other.y

    def less_msb(self, x, y):
        return x &lt; y and x &lt; (x ^ y)
</pre></div>
</div>
</div>
</div>
</section>
<section id="csv">
<h2>CSV<a class="headerlink" href="#csv" title="Permalink to this headline">#</a></h2>
<p>Python предоставя няколко модула за работа с данни сериализирани под различен формат. Един от тези модули е за работа с CSV файлове (coma-separated values). Ще разгледаме само пример за парсене на такъв файл, но модулът има много различни функционалности и опции.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import csv
from io import StringIO

contents = StringIO(  # == string stream
    &#39;&#39;&#39;Lyubo,21,Sofia
Alex,22,Sofia
Ivan,49,&quot;Ne Sofia&quot;
&#39;&#39;&#39;)

reader = csv.reader(contents)
for index, row in enumerate(reader):
    print(index, &#39;:&#39;, row)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0 : [&#39;Lyubo&#39;, &#39;21&#39;, &#39;Sofia&#39;]
1 : [&#39;Alex&#39;, &#39;22&#39;, &#39;Sofia&#39;]
2 : [&#39;Ivan&#39;, &#39;49&#39;, &#39;Ne Sofia&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="json">
<h2>JSON<a class="headerlink" href="#json" title="Permalink to this headline">#</a></h2>
<p>Друг популярен формат на данни е JSON … Разбира се в Python има модул <code class="docutils literal notranslate"><span class="pre">json</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import json

my_dict = json.loads(&#39;{&quot;foo&quot;: {&quot;bar&quot;:[&quot;baz&quot;, null, 1.0, 2]}}&#39;)
print(&#39;От стринг конструирахме dict, който може да използваме:&#39;,
      my_dict[&#39;foo&#39;][&#39;bar&#39;])

print(&#39;Обратната операция на сериализиране е удобна за принтене на дебъг съобщения&#39;)
print(json.dumps(my_dict, sort_keys=True, indent=4))
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>От стринг конструирахме dict, който може да използваме: [&#39;baz&#39;, None, 1.0, 2]
Обратната операция на сериализиране е удобна за принтене на дебъг съобщения
{
    &quot;foo&quot;: {
        &quot;bar&quot;: [
            &quot;baz&quot;,
            null,
            1.0,
            2
        ]
    }
}
</pre></div>
</div>
</div>
</div>
</section>
<section id="regex">
<h2>Regex<a class="headerlink" href="#regex" title="Permalink to this headline">#</a></h2>
<p>Regex или още регулярни изрази са стрингове, които описват някакъв патърн, който може да използваме за търсене в обикновени стрингове.</p>
<p><code class="docutils literal notranslate"><span class="pre">regex</span></code> може да запълни материала за цял курс, но ще се опитаме да разгледаме само често използвани примери, без да навлизаме в подробности.</p>
<p>Писането на регулярни изрази обикновено е трудоемка задача, за това препоръчваме инструменти като <a class="reference external" href="https://regexr.com/">regexr</a>, които изпълняват regex в реално време и имат обяснение защо даден стринг е match-нал.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import re

# == (.start(), .end())
print(re.search(r&#39;123&#39;, &#39;458971985719285712324953928572&#39;).span())

ninjas = &#39;ninjatreenoooinjaforestninjavoicenwvi9ew9ninja&#39;

print(&#39;Следва ли стринга този патърн?&#39;,
      re.match(r&#39;.*ninja$&#39;, ninjas) is not None)

print(&#39;Намери всички срещания:&#39;,
      re.findall(r&#39;n.*?a&#39;, ninjas))

print(&#39;Разбиване на стринг на всяко срещане на патърн:&#39;,
      re.split(r&#39;n.*?a&#39;, ninjas))

print(&#39;Субституция на патърн в стринг:&#39;,
      re.sub(r&#39;n.*?a&#39;, &#39;-NINJA-&#39;, ninjas))
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(16, 19)
Следва ли стринга този патърн? True
Намери всички срещания: [&#39;ninja&#39;, &#39;noooinja&#39;, &#39;ninja&#39;, &#39;nwvi9ew9ninja&#39;]
Разбиване на стринг на всяко срещане на патърн: [&#39;&#39;, &#39;tree&#39;, &#39;forest&#39;, &#39;voice&#39;, &#39;&#39;]
Субституция на патърн в стринг: -NINJA-tree-NINJA-forest-NINJA-voice-NINJA-
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Hint helper
import base64

print(base64.b64encode(&#39;&#39;.encode()).decode())
print(base64.b64decode(&#39;&#39;.encode()).decode())
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="id3">
<h2>Допълнителни задачи<a class="headerlink" href="#id3" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://leetcode.com/problems/find-the-town-judge/">https://leetcode.com/problems/find-the-town-judge/</a> (<a class="reference external" href="https://github.com/luchev/interview-preparation/blob/master/leetcode/997.%20Find%20the%20Town%20Judge/1.py">solution</a>)</p></li>
<li><p><a class="reference external" href="https://leetcode.com/problems/number-of-islands/">https://leetcode.com/problems/number-of-islands/</a> (<a class="reference external" href="https://github.com/luchev/interview-preparation/blob/master/leetcode/200.%20Number%20of%20Islands/1.py">solution</a>)</p></li>
<li><p><a class="reference external" href="https://leetcode.com/problems/network-delay-time/">https://leetcode.com/problems/network-delay-time/</a> (<a class="reference external" href="https://github.com/luchev/interview-preparation/blob/master/leetcode/743.%20Network%20Delay%20Time/1.py">solution</a>)</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./05 - Data Structures and Oddities"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../04%20-%20Functional%20Programming/04%20-%20Functional%20Programming.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Функционално програмиране</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../06%20-%20Typing%20Hints/06%20-%20Typing%20Hints.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Type Hints</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Alexander Ignatov, Lyuboslav Karev, Ivan Luchev<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>